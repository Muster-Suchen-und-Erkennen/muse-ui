<!-- Contentbereich / zwei Spalten -->
<div ng-controller="FilmCtrl">
    <div class="container animated fadeIn">
        <div class="page-header">
            <my-film-page-head film="film" ></my-film-page-head>
        </div>
        <div class="row">
            <!-- Breadcrumb für Navigation zu Filmen und Rollen -->
            <div class="col-md-12">
                <ul class="breadcrumb">
                    <li><a href="#" translate>BREADCRUMBFILME</a></li>
                    <li>{{ 'BREADCRUMBFILM' | translate }}: <a href="#/filme/{{film.FilmID}}">{{film.Filmtitel}}</a></li>
                    <li translate>BREADCRUMBROLLENUEBERSICHT</li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <image-viewer screenshot-service-name="FilmScreenshots" thumb-service-name="FilmScreenshotThumbs" query-Params="{filmId: routeParams.filmId}"></image-viewer>
            </div>
            <div class="col-md-8">
                <!-- Eingabefelder für Filmdaten -->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">{{ 'FILMDATEN' | translate }}</h3>
                    </div>
                    <div class="panel-body">
                        <form class="form-horizontal" role="form">
                            <div class="form-group" ng-class="{'has-success': filmValidator.validationConstraints['film.Filmtitel'].valid, 'has-error': !filmValidator.validationConstraints['film.Filmtitel'].valid}">
                                <div class="col-xs-3 text-right">
                                    <label for="Filmtitel" class="control-label">{{ 'FILMTITEL' | translate }}</label>
                                    <span class="label"
                                          ng-class="{   'label-success': filmValidator.validationConstraints['film.Filmtitel'].valid,
                                                        'label-danger': !filmValidator.validationConstraints['film.Filmtitel'].valid}">
                                        <span class="glyphicon"
                                              ng-class="{   'glyphicon-ok': filmValidator.validationConstraints['film.Filmtitel'].valid,
                                                            'glyphicon-warning-sign': !filmValidator.validationConstraints['film.Filmtitel'].valid}">
                                        </span>
                                    </span>
                                </div>
                                <div class="col-xs-9">
                                    <input type="text" ng-model="film.Filmtitel" class="form-control" id="Filmtitel"
                                           placeholder="{{ 'FILMTITEL' | translate }}">
                                </div>
                            </div>
                            <div class="form-group" ng-class="{'has-success': filmValidator.validationConstraints['film.Originaltitel'].valid, 'has-error': !filmValidator.validationConstraints['film.Originaltitel'].valid}">
                                <div class="col-xs-3 text-right">
                                    <label for="Originaltitel" class="control-label">{{ 'ORIGINALTITEL' | translate }}</label>
                                    <span class="label"
                                          ng-class="{   'label-success': filmValidator.validationConstraints['film.Originaltitel'].valid,
                                                        'label-danger': !filmValidator.validationConstraints['film.Originaltitel'].valid}">
                                        <span class="glyphicon"
                                              ng-class="{   'glyphicon-ok': filmValidator.validationConstraints['film.Originaltitel'].valid,
                                                            'glyphicon-warning-sign': !filmValidator.validationConstraints['film.Originaltitel'].valid}">
                                        </span>
                                    </span>
                                </div>
                                <div class="col-xs-9">
                                    <input type="text" ng-model="film.Originaltitel" class="form-control" id="Originaltitel"
                                           placeholder="{{ 'ORIGINALTITEL' | translate }}">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-xs-3 text-right">
                                    <label for="RegisseurVorname" class="control-label">{{ 'REGISSEUR' | translate }}</label>
                                </div>
                                <div class="col-xs-4">
                                    <input type="text" ng-model="film.Regiseurvorname"
                                           typeahead="rvn.Regiseurvorname for rvn in selectables.regisseurVornamen | filter:$viewValue | limitTo: 8"
                                           class="form-control" id="RegisseurVorname"
                                           placeholder="{{ 'VORNAME' | translate }}">
                                </div>
                                <div class="col-xs-5">
                                    <input type="text" ng-model="film.Regiseurnachname"
                                           typeahead="rnn.Regiseurnachname for rnn in selectables.regisseurNachnamen | filter:$viewValue | limitTo: 8"
                                           class="form-control"
                                           id="RegiseurNachname"
                                           placeholder="{{ 'NACHNAME' | translate }}">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-xs-3 text-right">
                                    <label for="KostuembildnerVorname" class="control-label">{{ 'KOSTUEMBILDNER' | translate }}</label>
                                </div>
                                <div class="col-xs-4">
                                    <input type="text" ng-model="film.Kostuembildnervorname"
                                           typeahead="kbvn.Kostuembildnervorname for kbvn in selectables.kostuembildnerVornamen | filter:$viewValue | limitTo: 8"
                                           class="form-control"
                                           id="KostuembildnerVorname"
                                           placeholder="{{ 'VORNAME' | translate }}">
                                </div>
                                <div class="col-xs-5">
                                    <input type="text" ng-model="film.Kostuembildnernachname"
                                           typeahead="kbnn.Kostuembildnernachname for kbnn in selectables.kostuembildnerNachnamen | filter:$viewValue | limitTo: 8"
                                           class="form-control"
                                           id="KostuembildnerNachname"
                                           placeholder="{{ 'NACHNAME' | translate }}">
                                </div>
                            </div>
                            <div class="form-group">
                                <div ng-class="{'has-success': filmValidator.validationConstraints['film.Erscheinungsjahr'].valid, 'has-error': !filmValidator.validationConstraints['film.Erscheinungsjahr'].valid}">
                                    <div class="col-xs-3 text-right">
                                        <label for="Erscheinungsjahr" class="control-label">{{ 'ERSCHEINUNGSJAHR' | translate }}</label>
                                        <span class="label"
                                              ng-class="{   'label-success': filmValidator.validationConstraints['film.Erscheinungsjahr'].valid,
                                                        'label-danger': !filmValidator.validationConstraints['film.Erscheinungsjahr'].valid}">
                                            <span class="glyphicon"
                                                  ng-class="{   'glyphicon-ok': filmValidator.validationConstraints['film.Erscheinungsjahr'].valid,
                                                                'glyphicon-warning-sign': !filmValidator.validationConstraints['film.Erscheinungsjahr'].valid}">
                                            </span>
                                        </span>
                                    </div>
                                    <div class="col-xs-3">
                                        <input type="number" string-to-number ng-model="film.Erscheinungsjahr" class="form-control"
                                               id="Erscheinungsjahr"
                                               placeholder="{{ 'ERSCHEINUNGSJAHR' | translate }}">
                                    </div>
                                </div>
                                <div ng-class="{'has-success': filmValidator.validationConstraints['film.Dauer'].valid, 'has-error': !filmValidator.validationConstraints['film.Dauer'].valid}">
                                    <div class="col-xs-3 text-right">
                                        <label for="Dauer" class="control-label">{{ 'DAUER' | translate }}</label>
                                        <span class="label"
                                              ng-class="{   'label-success': filmValidator.validationConstraints['film.Dauer'].valid,
                                                        'label-danger': !filmValidator.validationConstraints['film.Dauer'].valid}">
                                            <span class="glyphicon"
                                                  ng-class="{   'glyphicon-ok': filmValidator.validationConstraints['film.Dauer'].valid,
                                                                'glyphicon-warning-sign': !filmValidator.validationConstraints['film.Dauer'].valid}">
                                            </span>
                                        </span>
                                    </div>
                                    <div class="col-xs-3">
                                        <input type="number" string-to-number ng-model="film.Dauer" class="form-control"
                                               id="Dauer"
                                               placeholder="{{ 'DAUER' | translate }}">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" ng-class="{'has-success': filmValidator.validationConstraints['film.Produktionsorte'].valid, 'has-error': !filmValidator.validationConstraints['film.Produktionsorte'].valid}">
                                <div class="col-xs-3 text-right">
                                    <label class="control-label">{{ 'PRODUKTIONSORTE' | translate }}</label>
                                    <span class="label"
                                          ng-class="{   'label-success': filmValidator.validationConstraints['film.Produktionsorte'].valid,
                                                        'label-danger': !filmValidator.validationConstraints['film.Produktionsorte'].valid}">
                                        <span class="glyphicon"
                                              ng-class="{   'glyphicon-ok': filmValidator.validationConstraints['film.Produktionsorte'].valid,
                                                                'glyphicon-warning-sign': !filmValidator.validationConstraints['film.Produktionsorte'].valid}">
                                        </span>
                                    </span>
                                </div>
                                <tree-select
                                        id="Produktionsorte"
                                        tree-model="selectables.produktionsorte"
                                        selection="film.Produktionsorte"
                                        btn-div-class="col-xs-1"
                                        select-div-class="col-xs-8"
                                        prepared-flatten-list="selectables.flattenLists.produktionsorte"
                                        placeholder="{{ 'PRODUKTIONSORTE' | translate }}">
                                </tree-select>
                            </div>
                            <div class="form-group" ng-class="{'has-success': filmValidator.validationConstraints['film.Genres'].valid, 'has-error': !filmValidator.validationConstraints['film.Genres'].valid}">
                                <div class="col-xs-3 text-right">
                                    <label class="control-label">{{ 'GENRES' | translate }}</label>
                                    <span class="label"
                                          ng-class="{   'label-success': filmValidator.validationConstraints['film.Genres'].valid,
                                                        'label-danger': !filmValidator.validationConstraints['film.Genres'].valid}">
                                        <span class="glyphicon"
                                              ng-class="{   'glyphicon-ok': filmValidator.validationConstraints['film.Genres'].valid,
                                                                'glyphicon-warning-sign': !filmValidator.validationConstraints['film.Genres'].valid}">
                                        </span>
                                    </span>
                                </div>
                                <tree-select
                                    id="Genre"
                                    tree-model="selectables.genres"
                                    selection="film.Genres"
                                    btn-div-class="col-xs-1"
                                    select-div-class="col-xs-8"
                                    prepared-flatten-list="selectables.flattenLists.genres"
                                    placeholder="{{ 'GENRES' | translate }}">
                                </tree-select>
                            </div>
                            <div class="form-group" ng-class="{'has-success': filmValidator.validationConstraints['film.Farbkonzepte'].valid, 'has-error': !filmValidator.validationConstraints['film.Farbkonzepte'].valid}">
                                <div class="col-xs-3 text-right">
                                    <label class="control-label">{{ 'FARBKONZEPTE' | translate }}</label>
                                    <span class="label"
                                          ng-class="{   'label-success': filmValidator.validationConstraints['film.Farbkonzepte'].valid,
                                                        'label-danger': !filmValidator.validationConstraints['film.Farbkonzepte'].valid}">
                                        <span class="glyphicon"
                                              ng-class="{   'glyphicon-ok': filmValidator.validationConstraints['film.Farbkonzepte'].valid,
                                                                'glyphicon-warning-sign': !filmValidator.validationConstraints['film.Farbkonzepte'].valid}">
                                        </span>
                                    </span>
                                </div>
                                <tree-select
                                        id="Farbkonzepte"
                                        tree-model="selectables.farbkonzepte"
                                        selection="film.Farbkonzepte"
                                        btn-div-class="col-xs-1"
                                        select-div-class="col-xs-8"
                                        prepared-flatten-list="selectables.flattenLists.farbkonzepte"
                                        placeholder="{{ 'FARBKONZEPTE' | translate }}">
                                </tree-select>
                            </div>

                            <div class="form-group" ng-class="{'has-success': filmValidator.validationConstraints['film.Stil'].valid, 'has-error': !filmValidator.validationConstraints['film.Stil'].valid}">
                                <div class="col-xs-3 text-right">
                                    <label class="control-label">{{ 'STIL' | translate }}</label>
                                    <span class="label"
                                          ng-class="{   'label-success': filmValidator.validationConstraints['film.Stil'].valid,
                                                        'label-danger': !filmValidator.validationConstraints['film.Stil'].valid}">
                                        <span class="glyphicon"
                                              ng-class="{   'glyphicon-ok': filmValidator.validationConstraints['film.Stil'].valid,
                                                                'glyphicon-warning-sign': !filmValidator.validationConstraints['film.Stil'].valid}">
                                        </span>
                                    </span>
                                </div>
                                <div class="col-xs-9">
                                    <div class="col-xs-2">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" ng-model="film.Stil" name="stil" id="stil_realistisch"
                                                       value="realistisch">
                                                {{ 'FILMSTILREALISTISCH' | translate }}
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-xs-2">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" ng-model="film.Stil" name="stil" id="stil_unrealistisch"
                                                       value="unrealistisch">
                                                {{ 'FILMSTILUNREALISTISCH' | translate }}
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-offset-3 col-xs-2">
                                    <button ng-disabled="!filmValidator.validationResult.valid" ng-show="film.FilmID==='new'" style="width: 100%" class="btn btn-primary"
                                            ng-click="createFilm()">{{ 'SPEICHERN' | translate }}
                                    </button>
                                    <button ng-disabled="!filmValidator.validationResult.valid" ng-show="film.FilmID!=='new'" style="width: 100%" class="btn btn-primary"
                                            ng-click="updateFilm()">{{ 'AENDERN' | translate }}
                                    </button>
                                </div>
                                <div class="col-xs-2">
                                    <button class="btn btn-default" ng-click="reloadPage()">{{ 'ZURUECKSETZEN' | translate }}</button>
                                </div>
                            </div>
                            <div ng-class="{bounceInUp: savedProperly, bounceOutDown: !savedProperly}"
                                 class="form-group animated">
                                <div class="col-xs-12">
                                    <div style="text-align: center" class="alert alert-success center-block">
                                        {{ 'FILMERFOLGREICHGESPEICHERT' | translate }}
                                    </div>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- Bereich für die Eingabe von Rollen -->
        <div class="row">
            <div class="col-xs-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">{{ 'ROLLEN' | translate }} <span class="badge">{{ roles.length }}</span></h3>
                    </div>
                    <div class="row">
                        <div class="panel-body">
                            <div class="col-xs-3">
                                <button data-toggle="modal" data-target="#myRoleDetailModal" ng-click="showCreateRoleModal()" class="btn btn-primary">{{ 'NEUEROLLEANLEGEN' | translate }}</button>
                            </div>
                            <div class="col-xs-9">
                                <div class="input-group">
                                    <input type="text" class="form-control" ng-model="searchText">
                                        <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-search"></span>
                                        </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <table class="table table-hover" ng-hide="roles.length === 0">
                        <thead>
                        <tr>
                            <th style="width: 3%">#</th>
                            <th style="width: 20%">{{ 'ROLLENVORNAME' | translate }}</th>
                            <th style="width: 20%">{{ 'ROLLENNACHNAME' | translate }}</th>
                            <th style="width: 20%">{{ 'DARSTELLERVORNAME' | translate }}</th>
                            <th style="width: 20%">{{ 'DARSTELLERNACHNAME' | translate }}</th>
                            <th style="width: 7%"></th>
                            <th style="width: 3%"></th>
                            <th style="width: 7%"></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="role in roles | filter:searchText">
                            <td>{{  $index + 1  }}</td>
                            <td>{{  role.Rollenvorname  }}</td>
                            <td>{{  role.Rollennachname  }}</td>
                            <td>{{  role.Schauspielervorname  }}</td>
                            <td>{{  role.Schauspielernachname  }}</td>
                            <td>
                                <!-- Details of role -->
                                <button data-toggle="modal" data-target="#myRoleDetailModal" ng-click="showRoleDetailsModal(role)" class="btn btn-info btn-xs pull-right" tooltip-html-unsafe="{{ 'DETAILSZUROLLE' | translate:{rolename: role.Rollenvorname + ' ' + role.Rollennachname} }}"><span class="glyphicon glyphicon-info-sign"></span> </button>
                            </td><td>
                            <!-- Costumes of role -->
                            <a href="#/filme/{{film.FilmID}}/rollen/{{role.RollenID}}/kostueme/" class="btn btn-info btn-xs pull-right" tooltip-html-unsafe="{{ 'KOSTUEMEVONROLLE' | translate:{rolename: role.Rollenvorname + ' ' + role.Rollennachname} }}"><span class="glyphicon glyphicon-camera"></span> </a>
                        </td>
                            <td>
                                <!-- Delete role -->
                                <button data-toggle="modal" data-target="#myRoleDeleteModal" ng-click="showRoleDeleteModal(role)" class="btn btn-danger btn-xs pull-left" tooltip-html-unsafe="{{ 'ROLLELOESCHENBUTTON' | translate:{rolename: role.Rollenvorname + ' ' + role.Rollennachname} }}"><span class="glyphicon glyphicon glyphicon-remove"></span> </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <ng-include src="'templates/modal/roledetails.html'"></ng-include>
    <ng-include src="'templates/modal/roledelete.html'"></ng-include>
</div>